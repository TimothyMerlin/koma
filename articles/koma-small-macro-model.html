<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Estimating Small Macro Model for Switzerland • koma</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Estimating Small Macro Model for Switzerland">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">koma</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html">Home</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/timothymerlin/koma" aria-label="koma on GitHub"><span class="fa fab fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Estimating Small Macro Model for Switzerland</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/timothymerlin/koma/blob/0.2.1/vignettes/koma-small-macro-model.Rmd" class="external-link"><code>vignettes/koma-small-macro-model.Rmd</code></a></small>
      <div class="d-none name"><code>koma-small-macro-model.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="equations-of-the-small-macro-model">Equations of the Small Macro Model<a class="anchor" aria-label="anchor" href="#equations-of-the-small-macro-model"></a>
</h2>
<p><strong>Stochastic equations</strong></p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable><mtr><mtd columnalign="right" style="text-align: right"><mtext mathvariant="normal">Consumption</mtext><mspace width="1.0em"></mspace><msub><mi>C</mi><mi>t</mi></msub></mtd><mtd columnalign="left" style="text-align: left"><mo>=</mo><msub><mi>β</mi><mn>1</mn></msub><mo>+</mo><msub><mi>β</mi><mrow><mn>1</mn><mo>,</mo><mn>2</mn></mrow></msub><msub><mi>C</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>γ</mi><mrow><mn>1</mn><mo>,</mo><mn>7</mn></mrow></msub><msub><mi>Y</mi><mi>t</mi></msub><mo>+</mo><msub><mi>ε</mi><mrow><mn>1</mn><mi>t</mi></mrow></msub><mo>,</mo></mtd></mtr><mtr><mtd columnalign="right" style="text-align: right"><mtext mathvariant="normal">Investment</mtext><mspace width="1.0em"></mspace><msub><mi>I</mi><mi>t</mi></msub></mtd><mtd columnalign="left" style="text-align: left"><mo>=</mo><msub><mi>β</mi><mn>2</mn></msub><mo>+</mo><msub><mi>β</mi><mrow><mn>2</mn><mo>,</mo><mn>3</mn></mrow></msub><msub><mi>I</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>ε</mi><mrow><mn>2</mn><mi>t</mi></mrow></msub><mo>,</mo></mtd></mtr><mtr><mtd columnalign="right" style="text-align: right"><mtext mathvariant="normal">Exports</mtext><mspace width="1.0em"></mspace><msub><mi>X</mi><mi>t</mi></msub></mtd><mtd columnalign="left" style="text-align: left"><mo>=</mo><msub><mi>β</mi><mn>3</mn></msub><mo>+</mo><msub><mi>β</mi><mrow><mn>3</mn><mo>,</mo><mn>4</mn></mrow></msub><msub><mi>X</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>β</mi><mrow><mn>3</mn><mo>,</mo><mn>7</mn></mrow></msub><mi>W</mi><mi>G</mi><mi>D</mi><msub><mi>P</mi><mi>t</mi></msub><mo>+</mo><msub><mi>ε</mi><mrow><mn>3</mn><mi>t</mi></mrow></msub><mo>,</mo></mtd></mtr><mtr><mtd columnalign="right" style="text-align: right"><mtext mathvariant="normal">Imports</mtext><mspace width="1.0em"></mspace><msub><mi>M</mi><mi>t</mi></msub></mtd><mtd columnalign="left" style="text-align: left"><mo>=</mo><msub><mi>β</mi><mn>4</mn></msub><mo>+</mo><msub><mi>γ</mi><mrow><mn>4</mn><mo>,</mo><mn>8</mn></mrow></msub><msub><mi>D</mi><mi>t</mi></msub><mo>+</mo><msub><mi>β</mi><mrow><mn>4</mn><mo>,</mo><mn>5</mn></mrow></msub><msub><mi>I</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>ε</mi><mrow><mn>4</mn><mi>t</mi></mrow></msub><mo>,</mo></mtd></mtr><mtr><mtd columnalign="right" style="text-align: right"><mtext mathvariant="normal">Prices</mtext><mspace width="1.0em"></mspace><msub><mi>P</mi><mi>t</mi></msub></mtd><mtd columnalign="left" style="text-align: left"><mo>=</mo><msub><mi>β</mi><mn>5</mn></msub><mo>+</mo><msub><mi>β</mi><mrow><mn>5</mn><mo>,</mo><mn>9</mn></mrow></msub><mi>E</mi><msub><mi>R</mi><mi>t</mi></msub><mo>+</mo><msub><mi>β</mi><mrow><mn>5</mn><mo>,</mo><mn>10</mn></mrow></msub><mi>O</mi><msub><mi>P</mi><mi>t</mi></msub><mo>+</mo><msub><mi>β</mi><mrow><mn>5</mn><mo>,</mo><mn>6</mn></mrow></msub><msub><mi>P</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>ε</mi><mrow><mn>5</mn><mi>t</mi></mrow></msub><mo>,</mo></mtd></mtr><mtr><mtd columnalign="right" style="text-align: right"><mtext mathvariant="normal">Interest Rate</mtext><mspace width="1.0em"></mspace><msub><mi>R</mi><mi>t</mi></msub></mtd><mtd columnalign="left" style="text-align: left"><mo>=</mo><msub><mi>β</mi><mn>6</mn></msub><mo>+</mo><msub><mi>β</mi><mrow><mn>6</mn><mo>,</mo><mn>6</mn></mrow></msub><msub><mi>P</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>β</mi><mrow><mn>6</mn><mo>,</mo><mn>8</mn></mrow></msub><msub><mi>R</mi><mrow><mi>G</mi><mi>E</mi><mo>,</mo><mi>t</mi></mrow></msub><mo>+</mo><msub><mi>γ</mi><mrow><mn>6</mn><mo>,</mo><mn>5</mn></mrow></msub><msub><mi>P</mi><mi>t</mi></msub><mo>+</mo><msub><mi>ε</mi><mrow><mn>6</mn><mi>t</mi></mrow></msub><mi>.</mi></mtd></mtr></mtable><annotation encoding="application/x-tex">
\begin{aligned}
\text{Consumption}\quad C_t &amp;= \beta_1 + \beta_{1,2} C_{t-1} + \gamma_{1,7} Y_t + \varepsilon_{1t},\\
\text{Investment}\quad I_t &amp;= \beta_2 + \beta_{2,3} I_{t-1} + \varepsilon_{2t},\\
\text{Exports}\quad X_t &amp;= \beta_3 + \beta_{3,4} X_{t-1} + \beta_{3,7} WGDP_t + \varepsilon_{3t},\\
\text{Imports}\quad M_t &amp;= \beta_4 + \gamma_{4,8} D_t + \beta_{4,5} I_{t-1} + \varepsilon_{4t},\\
\text{Prices}\quad P_t &amp;= \beta_5 + \beta_{5,9} ER_t + \beta_{5,10} OP_t 
     + \beta_{5,6} P_{t-1} + \varepsilon_{5t},\\
\text{Interest Rate}\quad R_t &amp;= \beta_6 + \beta_{6,6} P_{t-1} + \beta_{6,8} R_{GE,t} 
     + \gamma_{6,5} P_t + \varepsilon_{6t}.
\end{aligned}
</annotation></semantics></math></p>
<p><strong>Equilibrium condition</strong></p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable><mtr><mtd columnalign="right" style="text-align: right"><mtext mathvariant="normal">Equilibrium Ouput</mtext><mspace width="1.0em"></mspace><mi>G</mi><mi>D</mi><msub><mi>P</mi><mi>t</mi></msub></mtd><mtd columnalign="left" style="text-align: left"><mo>=</mo><mn>0.6</mn><mo>*</mo><msub><mi>C</mi><mi>t</mi></msub><mo>+</mo><mn>0.6</mn><mo>*</mo><msub><mi>D</mi><mi>t</mi></msub><mo>+</mo><mn>0.5</mn><mo>*</mo><msub><mi>X</mi><mi>t</mi></msub><mo>−</mo><mn>0.4</mn><mo>*</mo><msub><mi>I</mi><mi>t</mi></msub></mtd></mtr></mtable><annotation encoding="application/x-tex">
\begin{aligned}
\text{Equilibrium Ouput}\quad GDP_t &amp;= 0.6*C_t + 0.6*D_t + 0.5*X_t - 0.4*I_t
\end{aligned}
</annotation></semantics></math></p>
<p><strong>Identities</strong></p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable><mtr><mtd columnalign="right" style="text-align: right"><mtext mathvariant="normal">Domestic Demand</mtext><mspace width="1.0em"></mspace><msub><mi>D</mi><mi>t</mi></msub></mtd><mtd columnalign="left" style="text-align: left"><mo>=</mo><mn>0.6</mn><mo>*</mo><msub><mi>C</mi><mi>t</mi></msub><mo>+</mo><mn>0.4</mn><mo>*</mo><msub><mi>I</mi><mi>t</mi></msub></mtd></mtr></mtable><annotation encoding="application/x-tex">
\begin{aligned}
\text{Domestic Demand}\quad D_t &amp;= 0.6*C_t + 0.4*I_t
\end{aligned}
</annotation></semantics></math></p>
<p><strong>Coefficients</strong><br>
- The
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>β</mi><annotation encoding="application/x-tex">\beta</annotation></semantics></math>’s
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>γ</mi><annotation encoding="application/x-tex">\gamma</annotation></semantics></math>’s
are structural coefficients to be estimated.</p>
<p><strong>Endogenous variables</strong></p>
{C_t}{Consumption at time .}
{I_t}{Gross fixed capital formation (investment) at time .}
{X_t}{Exports at time .}
{M_t}{Imports at time .}
{P_t}{Price level at time .}
{R_t}{Short-term interest rate at time .}
{D_t}{Domestic demand, defined by .}
<p>{GDP_t}{Equilibrium output (demand), defined by .}</p>
<p><strong>Exogenous variables</strong></p>
{WGDP_t}{World GDP at time .}
{ER_t}{Exchange rate at time .}
{OP_t}{Oil price at time .}
<p>{}{German interest rate at time }.</p>
<p><strong>Other variables</strong></p>
{G_t}{Government spending at time .}
{T_t}{Taxes at time .}
<p>{epsilon_it}{Stochastic error term for equation at time .}</p>
</div>
<div class="section level2">
<h2 id="defining-the-sem-in-r">Defining the SEM in R<a class="anchor" aria-label="anchor" href="#defining-the-sem-in-r"></a>
</h2>
<p>To estimate and forecast this model, we need to specify the
equations, the exogenous variables, and the date ranges for estimation
and forecasting.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">equations</span> <span class="op">&lt;-</span> <span class="st">"consumption ~ gdp + consumption.L(1),</span></span>
<span><span class="st">investment ~ investment.L(1),</span></span>
<span><span class="st">exports ~ world_gdp + exports.L(1),</span></span>
<span><span class="st">imports ~ domestic_demand + imports.L(1),</span></span>
<span><span class="st">prices ~ exchange_rate + oil_price + prices.L(1),</span></span>
<span><span class="st">interest_rate ~ prices + interest_rate_germany + prices.L(1),</span></span>
<span><span class="st">gdp == 0.6*consumption + 0.6*domestic_demand + 0.5*exports - 0.4*imports,</span></span>
<span><span class="st">domestic_demand == 0.6*consumption + 0.4*investment"</span></span>
<span></span>
<span><span class="va">exogenous_variables</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"world_gdp"</span>, <span class="st">"interest_rate_germany"</span>, <span class="st">"exchange_rate"</span>, <span class="st">"oil_price"</span><span class="op">)</span></span></code></pre></div>
<p>The <code>equations</code> string contains the model equations, while
<code>exogenous_variables</code> lists the exogenous variables. The
<code>.L(1)</code> notation indicates a lag of one period. For further
details on the syntax, please refer to the <a href="../equations.html">equation syntax documentation</a>.</p>
</div>
<div class="section level2">
<h2 id="creating-the-sem">Creating the SEM<a class="anchor" aria-label="anchor" href="#creating-the-sem"></a>
</h2>
<p>The <code>system_of_equations</code> function is used to create a
system of equations object, which can then be used for estimation and
forecasting.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://timothymerlin.github.io/koma">koma</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">sys_eq</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/system_of_equations.html">system_of_equations</a></span><span class="op">(</span></span>
<span>  equations <span class="op">=</span> <span class="va">equations</span>,</span>
<span>  exogenous_variables <span class="op">=</span> <span class="va">exogenous_variables</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">sys_eq</span><span class="op">)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">System of Equations</span> <span style="color: #00BBBB;">─────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">##     <span style="font-weight: bold;">consumption</span> ~  constant + gdp + consumption.L(1)</span></span>
<span><span class="co">##      <span style="font-weight: bold;">investment</span> ~  constant + investment.L(1)</span></span>
<span><span class="co">##         <span style="font-weight: bold;">exports</span> ~  constant + world_gdp + exports.L(1)</span></span>
<span><span class="co">##         <span style="font-weight: bold;">imports</span> ~  constant + domestic_demand + imports.L(1)</span></span>
<span><span class="co">##          <span style="font-weight: bold;">prices</span> ~  constant + exchange_rate + oil_price + prices.L(1)</span></span>
<span><span class="co">##   <span style="font-weight: bold;">interest_rate</span> ~  constant + prices + interest_rate_germany + prices.L(1)</span></span>
<span><span class="co">##             <span style="font-weight: bold;">gdp</span> == 0.6 * consumption + 0.6 * domestic_demand + 0.5 * exports-0.4 * imports</span></span>
<span><span class="co">## <span style="font-weight: bold;">domestic_demand</span> == 0.6 * consumption + 0.4 * investment</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="defing-the-estimation-and-forecast-dates">Defing the Estimation and Forecast Dates<a class="anchor" aria-label="anchor" href="#defing-the-estimation-and-forecast-dates"></a>
</h2>
<p>Now, we need to specify the dates for estimation and forecasting.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  estimation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1996</span>, <span class="fl">1</span><span class="op">)</span>, end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2019</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  forecast <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2023</span>, <span class="fl">1</span><span class="op">)</span>, end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2023</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="preparing-the-data">Preparing the Data<a class="anchor" aria-label="anchor" href="#preparing-the-data"></a>
</h2>
<p>We will use the <code>small_open_economy</code> dataset, which
contains the required variables for the model. This dataset is a list of
standard time series (<code>ts</code>) objects, where each object
corresponds to a variable in the model. You can explore the dataset by
using the <code><a href="../reference/small_open_economy.html">?small_open_economy</a></code> command to view its
documentation and structure.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">small_open_economy</span></span></code></pre></div>
<p>To prepare the dataset for use with the <code>koma</code> package, we
need to convert the <code>ts</code> objects to the <code>ets</code>
format using the <code>as_ets</code> function.</p>
<p>The model is estimated in growth rates. The
<code>small_open_economy</code> dataset is in levels. We use the
<code>ets</code> to tell the model that the data is in levels and how to
convert it to growth rates. <code>ets</code> is generalized to accept
any additional attributes. Below we use this feature to save the series’
value_type (real or nominal).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">series</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">small_open_economy</span><span class="op">)</span></span>
<span><span class="va">series</span> <span class="op">&lt;-</span> <span class="va">series</span><span class="op">[</span><span class="op">!</span><span class="va">series</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"interest_rate"</span>, <span class="st">"interest_rate_germany"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="va">ts_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">series</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/koma_ts.html">as_ets</a></span><span class="op">(</span><span class="va">small_open_economy</span><span class="op">[[</span><span class="va">x</span><span class="op">]</span><span class="op">]</span>,</span>
<span>    series_type <span class="op">=</span> <span class="st">"level"</span>, method <span class="op">=</span> <span class="st">"diff_log"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ts_data</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">series</span></span>
<span></span>
<span><span class="va">ts_data</span><span class="op">$</span><span class="va">interest_rate</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/koma_ts.html">as_ets</a></span><span class="op">(</span><span class="va">small_open_economy</span><span class="op">$</span><span class="va">interest_rate</span>,</span>
<span>  series_type <span class="op">=</span> <span class="st">"rate"</span>, method <span class="op">=</span> <span class="st">"none"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">ts_data</span><span class="op">$</span><span class="va">interest_rate_germany</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/koma_ts.html">as_ets</a></span><span class="op">(</span><span class="va">small_open_economy</span><span class="op">$</span><span class="va">interest_rate_germany</span>,</span>
<span>  series_type <span class="op">=</span> <span class="st">"rate"</span>, method <span class="op">=</span> <span class="st">"none"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>With the data prepared, we can now proceed to estimate the model.
Before forecasting, however, we need to truncate the endogenous
variables to ensure they only include data up to the forecast start
date.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ts_data</span><span class="op">[</span><span class="va">sys_eq</span><span class="op">$</span><span class="va">endogenous_variables</span><span class="op">]</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">sys_eq</span><span class="op">$</span><span class="va">endogenous_variables</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/window.html" class="external-link">window</a></span><span class="op">(</span><span class="va">ts_data</span><span class="op">[[</span><span class="va">x</span><span class="op">]</span><span class="op">]</span>, end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2019</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="estimating-the-model">Estimating the Model<a class="anchor" aria-label="anchor" href="#estimating-the-model"></a>
</h2>
<p>The names of the list elements should match the variable names used
in the equations. Now, we can estimate the model using the
<code>estimate</code> function.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">estimates</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/estimate.html">estimate</a></span><span class="op">(</span></span>
<span>  <span class="va">sys_eq</span>,</span>
<span>  ts_data <span class="op">=</span> <span class="va">ts_data</span>,</span>
<span>  dates <span class="op">=</span> <span class="va">dates</span></span>
<span><span class="op">)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Gibbs Sampler Settings</span> <span style="color: #00BBBB;">──────────────────────────────────────────────────────</span></span></span>
<span><span class="co">## ── <span style="font-weight: bold;">System Wide Settings</span> ──</span></span>
<span><span class="co">## • Number of draws (`ndraws`): 2000</span></span>
<span><span class="co">## • Burn-in ratio (`burnin_ratio`): 0.5</span></span>
<span><span class="co">## • Burn-in (`burnin`): 1000</span></span>
<span><span class="co">## • Store frequency (`nstore`): 1</span></span>
<span><span class="co">## • Number of saved draws (`nsave`): 1000</span></span>
<span><span class="co">## • Tau (`tau`): 1.1</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Estimation</span> <span style="color: #00BBBB;">──────────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">## </span></span>
<span><span class="co">## <span style="color: #00BBBB;">──</span> <span style="color: #BB0000; font-weight: bold;">⚠ MCMC Acceptance Probability Warnings</span> <span style="color: #00BBBB;">──────────────────────────────────────</span></span></span>
<span><span class="co">## • <span style="font-weight: bold;">consumption</span>: 60.7%</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Some acceptance probabilities are outside the recommended range (20%-60%).</span></span>
<span><span class="co">## Consider revising the equations, tuning each equation's tau, or adjusting your priors.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">estimates</span><span class="op">)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Estimates</span> <span style="color: #00BBBB;">───────────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">##     <span style="font-weight: bold;">consumption</span> ~  0.36 - 0.03 * gdp  +  0.11 * consumption.L(1)</span></span>
<span><span class="co">##      <span style="font-weight: bold;">investment</span> ~  0.45  +  0.21 * investment.L(1)</span></span>
<span><span class="co">##         <span style="font-weight: bold;">exports</span> ~  - 0.29  +  3.2 * world_gdp - 0.3 * exports.L(1)</span></span>
<span><span class="co">##         <span style="font-weight: bold;">imports</span> ~  - 0.05  +  2.61 * domestic_demand - 0.11 * imports.L(1)</span></span>
<span><span class="co">##          <span style="font-weight: bold;">prices</span> ~  0.04  +  0.03 * exchange_rate  +  0.01 * oil_price  +  0.56 * prices.L(1)</span></span>
<span><span class="co">##   <span style="font-weight: bold;">interest_rate</span> ~  - 0.51  +  0.47 * prices  +  0.57 * interest_rate_germany - 0.19 * prices.L(1)</span></span>
<span><span class="co">##             <span style="font-weight: bold;">gdp</span> == 0.6 * consumption  +  0.6 * domestic_demand  +  0.5 * exports - 0.4 * imports</span></span>
<span><span class="co">## <span style="font-weight: bold;">domestic_demand</span> == 0.6 * consumption  +  0.4 * investment</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">estimates</span><span class="op">)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ===============================================================================================================</span></span>
<span><span class="co">##                        consumption    investment    exports         imports        prices        interest_rate </span></span>
<span><span class="co">## ---------------------------------------------------------------------------------------------------------------</span></span>
<span><span class="co">## constant                 0.36          0.45          -0.29           -0.05          0.04          -0.51        </span></span>
<span><span class="co">##                        [ 0.28; 0.46]  [0.19; 0.71]  [-0.86;  0.32]  [-0.55; 0.44]  [0.01; 0.06]  [-0.63; -0.40]</span></span>
<span><span class="co">## consumption.L(1)         0.11                                                                                  </span></span>
<span><span class="co">##                        [-0.08; 0.29]                                                                           </span></span>
<span><span class="co">## gdp                     -0.03                                                                                  </span></span>
<span><span class="co">##                        [-0.13; 0.06]                                                                           </span></span>
<span><span class="co">## investment.L(1)                        0.21                                                                    </span></span>
<span><span class="co">##                                       [0.03; 0.40]                                                             </span></span>
<span><span class="co">## exports.L(1)                                         -0.30                                                     </span></span>
<span><span class="co">##                                                     [-0.48; -0.13]                                             </span></span>
<span><span class="co">## world_gdp                                             3.20                                                     </span></span>
<span><span class="co">##                                                     [ 2.27;  4.05]                                             </span></span>
<span><span class="co">## imports.L(1)                                                         -0.11                                     </span></span>
<span><span class="co">##                                                                     [-0.28; 0.06]                              </span></span>
<span><span class="co">## domestic_demand                                                       2.61                                     </span></span>
<span><span class="co">##                                                                     [ 1.62; 3.74]                              </span></span>
<span><span class="co">## prices.L(1)                                                                         0.56          -0.19        </span></span>
<span><span class="co">##                                                                                    [0.46; 0.66]  [-0.60;  0.21]</span></span>
<span><span class="co">## exchange_rate                                                                       0.03                       </span></span>
<span><span class="co">##                                                                                    [0.02; 0.05]                </span></span>
<span><span class="co">## oil_price                                                                           0.01                       </span></span>
<span><span class="co">##                                                                                    [0.01; 0.01]                </span></span>
<span><span class="co">## interest_rate_germany                                                                              0.57        </span></span>
<span><span class="co">##                                                                                                  [ 0.52;  0.62]</span></span>
<span><span class="co">## prices                                                                                             0.47        </span></span>
<span><span class="co">##                                                                                                  [ 0.05;  0.96]</span></span>
<span><span class="co">## ===============================================================================================================</span></span>
<span><span class="co">## Posterior mean (90% credible interval: [5.0%, 95.0%])</span></span>
<span><span class="co">## Estimation period: 1996 Q1 - 2019 Q4</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">estimates</span>, variables <span class="op">=</span> <span class="st">"investment"</span><span class="op">)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## =============================</span></span>
<span><span class="co">##                  investment  </span></span>
<span><span class="co">## -----------------------------</span></span>
<span><span class="co">## constant          0.45       </span></span>
<span><span class="co">##                  [0.19; 0.71]</span></span>
<span><span class="co">## investment.L(1)   0.21       </span></span>
<span><span class="co">##                  [0.03; 0.40]</span></span>
<span><span class="co">## =============================</span></span>
<span><span class="co">## Posterior mean (90% credible interval: [5.0%, 95.0%])</span></span>
<span><span class="co">## Estimation period: 1996 Q1 - 2019 Q4</span></span></code></pre></div>
<p>To see how to run the estimation in parallel, refer to the <a href="../parallel.html">parallel estimation vignette</a>.</p>
</div>
<div class="section level2">
<h2 id="diagnostics">Diagnostics<a class="anchor" aria-label="anchor" href="#diagnostics"></a>
</h2>
<p>You can visualize MCMC diagnostics for coefficient draws using
<code><a href="../reference/trace_plot.html">trace_plot()</a></code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"ggplot2"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/trace_plot.html">trace_plot</a></span><span class="op">(</span><span class="va">estimates</span>, variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"consumption"</span>, <span class="st">"investment"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>You can also inspect running means (cumulative averages) with
<code><a href="../reference/running_mean_plot.html">running_mean_plot()</a></code>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"ggplot2"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/running_mean_plot.html">running_mean_plot</a></span><span class="op">(</span><span class="va">estimates</span>, variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"consumption"</span>, <span class="st">"investment"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>You can inspect autocorrelation diagnostics with
<code><a href="../reference/acf_plot.html">acf_plot()</a></code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"ggplot2"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/acf_plot.html">acf_plot</a></span><span class="op">(</span><span class="va">estimates</span>, variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"consumption"</span>, <span class="st">"investment"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="forecasting">Forecasting<a class="anchor" aria-label="anchor" href="#forecasting"></a>
</h2>
<p>To forecast the model, we can use the <code>forecast</code> function.
This function will generate forecasts for the specified date range.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">forecasts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/forecast.html">forecast</a></span><span class="op">(</span></span>
<span>  <span class="va">estimates</span>,</span>
<span>  dates <span class="op">=</span> <span class="va">dates</span></span>
<span><span class="op">)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Forecast</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Conditional fill detected after <span style="color: #0000BB;">"2019 Q4"</span>.</span></span>
<span><span class="co">## Missing observations for: <span style="color: #0000BB;">"consumption"</span>, <span style="color: #0000BB;">"investment"</span>, <span style="color: #0000BB;">"exports"</span>, <span style="color: #0000BB;">"imports"</span>,</span></span>
<span><span class="co">## <span style="color: #0000BB;">"prices"</span>, <span style="color: #0000BB;">"interest_rate"</span>, <span style="color: #0000BB;">"gdp"</span>, and <span style="color: #0000BB;">"domestic_demand"</span></span></span>
<span><span class="co">## Missing values will be conditionally filled up to <span style="color: #0000BB;">"2022 Q4"</span> before forecasting.</span></span>
<span><span class="co">## <span style="color: #00BB00;">✔</span> Forecasting completed.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">forecasts</span><span class="op">)</span></span>
<span><span class="co">##         consumption investment exports imports  prices interest_rate    gdp</span></span>
<span><span class="co">## 2023 Q1      0.3940     0.4953  1.2033  1.0677 -0.0587        0.8385 0.6717</span></span>
<span><span class="co">## 2023 Q2      0.3821     0.4917  0.6258  0.9778 -0.0703        1.2689 0.4066</span></span>
<span><span class="co">## 2023 Q3      0.3836     0.5117  0.7445  0.9278  0.0100        1.5664 0.4922</span></span>
<span><span class="co">## 2023 Q4      0.3883     0.5711  0.3600  0.9941 -0.0114        1.6947 0.2922</span></span>
<span><span class="co">##         domestic_demand world_gdp interest_rate_germany exchange_rate oil_price</span></span>
<span><span class="co">## 2023 Q1          0.4345    0.4827                2.3887        0.9217   -8.7520</span></span>
<span><span class="co">## 2023 Q2          0.4259    0.4083                3.1460       -1.3863   -3.3787</span></span>
<span><span class="co">## 2023 Q3          0.4348    0.4259                3.6393       -1.7869    9.9001</span></span>
<span><span class="co">## 2023 Q4          0.4614    0.2906                3.8850       -0.7502   -3.3373</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/rate.html">rate</a></span><span class="op">(</span><span class="va">forecasts</span><span class="op">$</span><span class="va">mean</span><span class="op">$</span><span class="va">gdp</span><span class="op">)</span></span>
<span><span class="co">## rate, diff_log, c(192510.114596192, 2022.75)</span></span>
<span><span class="co">##           Qtr1      Qtr2      Qtr3      Qtr4</span></span>
<span><span class="co">## 2023 0.6716659 0.4066033 0.4921892 0.2921809</span></span>
<span><span class="fu"><a href="../reference/level.html">level</a></span><span class="op">(</span><span class="va">forecasts</span><span class="op">$</span><span class="va">mean</span><span class="op">$</span><span class="va">gdp</span><span class="op">)</span></span>
<span><span class="co">## level, diff_log</span></span>
<span><span class="co">##          Qtr1     Qtr2     Qtr3     Qtr4</span></span>
<span><span class="co">## 2022                            192510.1</span></span>
<span><span class="co">## 2023 193807.5 194597.1 195557.3 196129.5</span></span></code></pre></div>
<div class="section level3">
<h3 id="conditional-forecasting">Conditional Forecasting<a class="anchor" aria-label="anchor" href="#conditional-forecasting"></a>
</h3>
<p>Conditional forecasting allows you to impose restrictions on certain
variables during the forecast period to fix their values. This is useful
for scenario analysis and policy evaluation, as the forecasts will
reflect these user-defined conditions.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fig</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">forecasts</span>, variables <span class="op">=</span> <span class="st">"prices"</span><span class="op">)</span></span>
<span><span class="va">fig</span></span>
<span></span>
<span><span class="va">restrictions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>prices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>value <span class="op">=</span> <span class="fl">0.5</span>, horizon <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">forecasts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/forecast.html">forecast</a></span><span class="op">(</span><span class="va">estimates</span>,</span>
<span>  dates <span class="op">=</span> <span class="va">dates</span>,</span>
<span>  restrictions <span class="op">=</span> <span class="va">restrictions</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">forecasts</span>, fig <span class="op">=</span> <span class="va">fig</span>, variables <span class="op">=</span> <span class="st">"prices"</span><span class="op">)</span></span>
<span><span class="va">forecasts</span><span class="op">$</span><span class="va">mean</span><span class="op">$</span><span class="va">prices</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Samad Sarferaz, Laurent Florin, Merlin Scherer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
